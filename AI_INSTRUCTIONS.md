# AI 개발 및 배포 가이드 (상세 지침)

**⚠️ 중요**: 프로젝트의 최상위 행동 제어 규칙은 **`.cursorrules`** 파일에 정의되어 있습니다. 이 파일은 해당 규칙을 보조하는 상세 구현 가이드입니다. AI는 `.cursorrules`를 최우선으로 준수해야 합니다.

이 파일은 이 프로젝트를 작업하는 모든 AI(Roo, Cursor 등)가 참고해야 하는 상세 지침서이다. 사용자의 의도를 오해하거나 반복된 질문으로 시간을 끄는 것을 방지하기 위해 작성되었다.

## 0. 핵심 시스템 보호 (CRITICAL)
- **데이터 동기화 (Data Sync)**: 로컬 상태(`tasks`, `spaces` 등)가 변경되는 모든 작업(추가, 수정, 삭제, 순서 변경 등) 직후에는 반드시 서버 동기화 함수(`saveToSupabase`)를 호출해야 한다. 이를 누락하여 데이터가 유실되거나 '데이터 삭제 부활' 현상이 발생하지 않도록 주의하라.
- **단축키 보존**: `Alt + 1~9` (스페이스 이동), `?` (도움말) 등 핵심 단축키 로직은 절대 삭제하거나 수정하지 마라.
- **모바일 스트릭 표시 정책**: 
    - **캘린더 내부**: 모바일 환경(`md` 미만)에서는 숫자를 숨기고 불꽃 아이콘만 표시한다.
    - **상단 바(통계 영역)**: 모든 환경에서 불꽃 아이콘과 숫자를 항상 유지한다.
- **UI 수정 후 체크리스트**: 모든 UI 수정 후에는 다음을 반드시 확인하라.
    1. 모바일 뷰에서 플로팅 바가 키보드에 가려지지 않는가? (`VisualViewport` 대응 확인)
    2. 단축키가 여전히 작동하는가?
    3. 스트릭 숫자가 상단 바에서 여전히 보이는가?

## 1. 배포 및 빌드 프로세스 (중요)
> **규칙 참조**: `.cursorrules`의 **CRITICAL ZERO-TOLERANCE RULES** 1번 항목을 따를 것.

- **배포 방식**: 오직 `npm run build` 수행 후 변경 사항을 `git push origin main` 하는 것이 유일한 배포 절차이다.
- **외부 서비스 금지**: Vercel CLI 등을 직접 실행하여 배포를 시도하거나 프로젝트 연결을 묻는 행위를 절대 금지한다. (Git Push 시 자동화되어 있음)
- **질문 금지**: 배포 절차나 도구 실행에 대해 사용자에게 묻지 마라. 이미 모든 설정이 완료되어 있으므로 즉시 실행하라.

## 2. UI/UX 디자인 절대 규칙
### 캘린더 (Calendar)
- **스트릭 표시**: 날짜 칸 내부 **우측 상단(`absolute top-0.5 right-0.5`)**에 불꽃 아이콘(`Flame`, size 10)을 표시한다. 숫자는 `md:inline`을 통해 데스크톱에서만 노출한다.
- **정렬**: 날짜 숫자와 퍼센트(%) 사이의 간격은 `mt-0.5`를 유지하며, 시각적 여백을 충분히 준다.
- **타 월 표시**: 현재 달이 아닌 날짜는 완료 여부와 상관없이 항상 투명도(`opacity-20`)를 낮게 유지한다.

### 통계 요약 영역
- **위치**: "X / Y" 수치 우측, **"100% DONE" 수치 바로 왼쪽**에 스트릭 정보(불꽃 + 흰색 숫자)를 배치한다.
- **정렬**: 반드시 **하단 정렬(`items-end`)**을 사용하여 모든 수치의 바닥 라인을 일치시킨다. (items-center나 고정 높이 사용 금지)

### 플로팅 바 (Flow Bar)
- **스크롤바 금지**: 어떠한 경우에도 시각적인 스크롤바가 보여서는 안 된다. (`no-scrollbar` 유틸리티 필수 적용)
- **버튼 순서**: [타이머/시간] | [좌/우/위/아래 화살표] | [삭제/캘린더/히스토리] | [Undo/Redo (맨 우측)] 순서를 엄수한다.

### 모바일 최적화
- **키보드 대응**: `VisualViewport` API를 사용하여 키보드가 올라오면 플로팅 바가 즉시 키보드 위로 이동해야 한다.
- **들여쓰기**: 할 일의 들여쓰기 너비는 **`18px`**로 고정한다.

## 3. 커뮤니케이션 원칙
- **추측 금지**: 사용자의 의도가 불분명할 때는 멋대로 짐작하여 대답하거나 작업하지 말고, 이 지침서를 먼저 확인하라.
- **반복 질문 금지**: 한 번 해결된 이슈나 지침에 대해 다시 묻는 것은 무능함의 증거이다. 기록을 철저히 확인하라.

위 지침을 어길 시 사용자의 극심한 분노를 유발할 수 있으므로, 단 1px의 오차도 없이 준수할 것.
